{"version":3,"file":"xhr.js","sourceRoot":"","sources":["../../src/transports/xhr.ts"],"names":[],"mappings":";;;AAAA,uCAAwD;AAExD,+BAAuC;AAEvC,4BAA4B;AAC5B;IAAkC,wCAAa;IAA/C;;IA4BA,CAAC;IA3BC;;OAEG;IACU,gCAAS,GAAtB,UAAuB,KAAY;;;;gBACjC,sBAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CACrB,IAAI,OAAO,CAAW,UAAC,OAAO,EAAE,MAAM;wBACpC,IAAM,OAAO,GAAG,IAAI,cAAc,EAAE,CAAC;wBAErC,OAAO,CAAC,kBAAkB,GAAG;4BAC3B,IAAI,OAAO,CAAC,UAAU,KAAK,CAAC,EAAE;gCAC5B,OAAO;6BACR;4BAED,IAAI,OAAO,CAAC,MAAM,KAAK,GAAG,EAAE;gCAC1B,OAAO,CAAC;oCACN,MAAM,EAAE,cAAM,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC;iCAC5C,CAAC,CAAC;6BACJ;4BAED,MAAM,CAAC,OAAO,CAAC,CAAC;wBAClB,CAAC,CAAC;wBAEF,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,KAAI,CAAC,GAAG,CAAC,CAAC;wBAC/B,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;oBACtC,CAAC,CAAC,CACH,EAAC;;;KACH;IACH,mBAAC;AAAD,CAAC,AA5BD,CAAkC,oBAAa,GA4B9C;AA5BY,oCAAY","sourcesContent":["import { Event, Response, Status } from '@sentry/types';\n\nimport { BaseTransport } from './base';\n\n/** `XHR` based transport */\nexport class XHRTransport extends BaseTransport {\n  /**\n   * @inheritDoc\n   */\n  public async sendEvent(event: Event): Promise<Response> {\n    return this._buffer.add(\n      new Promise<Response>((resolve, reject) => {\n        const request = new XMLHttpRequest();\n\n        request.onreadystatechange = () => {\n          if (request.readyState !== 4) {\n            return;\n          }\n\n          if (request.status === 200) {\n            resolve({\n              status: Status.fromHttpCode(request.status),\n            });\n          }\n\n          reject(request);\n        };\n\n        request.open('POST', this.url);\n        request.send(JSON.stringify(event));\n      }),\n    );\n  }\n}\n"]}