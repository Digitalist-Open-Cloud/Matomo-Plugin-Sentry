{"version":3,"file":"fetch.js","sourceRoot":"","sources":["../../src/transports/fetch.ts"],"names":[],"mappings":";AAAA,OAAO,EAAmB,MAAM,EAAE,MAAM,eAAe,CAAC;AACxD,OAAO,EAAE,eAAe,EAAE,MAAM,oBAAoB,CAAC;AACrD,OAAO,EAAE,sBAAsB,EAAE,MAAM,wBAAwB,CAAC;AAEhE,OAAO,EAAE,aAAa,EAAE,MAAM,QAAQ,CAAC;AAEvC,IAAM,MAAM,GAAG,eAAe,EAAU,CAAC;AAEzC,8BAA8B;AAC9B;IAAoC,0CAAa;IAAjD;;IAqBA,CAAC;IApBC;;OAEG;IACU,kCAAS,GAAtB,UAAuB,KAAY;;;;gBAC3B,cAAc,GAAgB;oBAClC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC;oBAC3B,MAAM,EAAE,MAAM;oBACd,wHAAwH;oBACxH,4CAA4C;oBAC5C,2EAA2E;oBAC3E,yDAAyD;oBACzD,cAAc,EAAE,CAAC,sBAAsB,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAmB;iBAC7E,CAAC;gBAEF,sBAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CACrB,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC,IAAI,CAAC,UAAA,QAAQ,IAAI,OAAA,CAAC;wBACvD,MAAM,EAAE,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;qBAC7C,CAAC,EAFsD,CAEtD,CAAC,CACJ,EAAC;;;KACH;IACH,qBAAC;AAAD,CAAC,AArBD,CAAoC,aAAa,GAqBhD","sourcesContent":["import { Event, Response, Status } from '@sentry/types';\nimport { getGlobalObject } from '@sentry/utils/misc';\nimport { supportsReferrerPolicy } from '@sentry/utils/supports';\n\nimport { BaseTransport } from './base';\n\nconst global = getGlobalObject<Window>();\n\n/** `fetch` based transport */\nexport class FetchTransport extends BaseTransport {\n  /**\n   * @inheritDoc\n   */\n  public async sendEvent(event: Event): Promise<Response> {\n    const defaultOptions: RequestInit = {\n      body: JSON.stringify(event),\n      method: 'POST',\n      // Despite all stars in the sky saying that Edge supports old draft syntax, aka 'never', 'always', 'origin' and 'default\n      // https://caniuse.com/#feat=referrer-policy\n      // It doesn't. And it throw exception instead of ignoring this parameter...\n      // REF: https://github.com/getsentry/raven-js/issues/1233\n      referrerPolicy: (supportsReferrerPolicy() ? 'origin' : '') as ReferrerPolicy,\n    };\n\n    return this._buffer.add(\n      global.fetch(this.url, defaultOptions).then(response => ({\n        status: Status.fromHttpCode(response.status),\n      })),\n    );\n  }\n}\n"]}